# #!/bin/sh

# # Get the last commit message (most recent one)
# last_msg=$(git log -1 --pretty=%s)

# # Get previous 15 commit messages (excluding the latest one)
# previous_msgs=$(git log -15 --skip=1 --pretty=%s)

# echo "ğŸ“ Checking if commit message '$last_msg' was already used..."

# # Check if the last message is in the previous ones
# if echo "$previous_msgs" | grep -Fxq "$last_msg"; then
#   echo "âŒ Push blocked: Commit message '$last_msg' was already used in the last 15 commits."
#   echo "ğŸ’¡ Please use a unique commit message."
#   exit 1
# fi 

# # Run ESLint (optional)
# echo "ğŸ” Running ESLint..."
# npm run lint

# if [ $? -ne 0 ]; then
#   echo "âŒ ESLint failed. Push aborted."
#   exit 1
# fi

# echo "âœ… All checks passed. Proceeding with push."




# #!/bin/sh

# # Get the last commit message (most recent one)
last_msg=$(git log -1 --pretty=%s)
# # Get previous 15 commit messages (excluding the latest one)
previous_msgs=$(git log -15 --skip=1 --pretty=%s)
echo "ğŸ“ Checking if commit message '$last_msg' was already used..."
# # Check if the last message is in the previous ones
if echo "$previous_msgs" | grep -Fxq "$last_msg"; then
echo "âŒ Push blocked: Commit message '$last_msg' was already used in the last 15 commits."
echo "ğŸ’¡ Please use a unique commit message."
exit 1
fi
# # Run ESLint (optional)
echo "ğŸ” Running ESLint..."
npm run lint
if [ $? -ne 0 ]; then
echo "âŒ ESLint failed. Push aborted."
exit 1
fi
echo "âœ… All checks passed. Proceeding with push."
#!/bin/sh

Get the last commit message (most recent one)
last_msg=$(git log -1 --pretty=%s)

Get previous 15 commit messages (excluding the latest one)
previous_msgs=$(git log -15 --skip=1 --pretty=%s)

echo "ğŸ“ Checking if commit message '$last_msg' was already used..."

Check if the last message is in the previous ones
if echo "$previous_msgs" | grep -Fxq "$last_msg"; then
  echo "âŒ Push blocked: Commit message '$last_msg' was already used in the last 15 commits."
  echo "ğŸ’¡ Please use a unique commit message."
  exit 1
fi 

Pull latest changes from the main branch before pushing
echo "ğŸ”„ Pulling latest changes from origin/main..."
git pull origin main

Check if git pull was successful
if [ $? -ne 0 ]; then
  echo "âŒ Failed to pull from main branch. Push aborted."
  exit 1
fi

Run ESLint
echo "ğŸ” Running ESLint..."
npm run lint

if [ $? -ne 0 ]; then
  echo "âŒ ESLint failed. Push aborted."
  exit 1
fi

echo "âœ… All checks passed. Proceeding with push."